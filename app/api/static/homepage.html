<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>네이버 스마트스토어 Q&A 자동화 솔루션</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" />
    <style>
        body { font-family: 'Pretendard', sans-serif; }
        .json-panel {
            background: #0f172a;
            color: #dbeafe;
            border-radius: 0.75rem;
            padding: 0.75rem;
            min-height: 7rem;
            font-size: 0.75rem;
            line-height: 1.4;
            overflow: auto;
            white-space: pre-wrap;
            word-break: break-word;
        }
        .live-item {
            border: 1px solid #c7d2fe;
            background: #eef2ff;
            border-radius: 0.75rem;
            padding: 0.75rem;
        }
        .live-item-meta {
            font-size: 0.75rem;
            color: #475569;
            margin-bottom: 0.35rem;
        }
        .live-item-q {
            font-size: 0.9rem;
            font-weight: 700;
            margin-bottom: 0.25rem;
            color: #0f172a;
        }
        .live-item-a {
            font-size: 0.86rem;
            line-height: 1.45;
            color: #1e293b;
            white-space: pre-wrap;
        }
        .qna-board-item {
            border: 1px solid #bfdbfe;
            background: #eff6ff;
            border-radius: 0.75rem;
            padding: 0.75rem;
        }
        .qna-board-head {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 0.5rem;
            margin-bottom: 0.4rem;
        }
        .qna-badge {
            font-size: 0.7rem;
            font-weight: 700;
            border-radius: 9999px;
            padding: 0.2rem 0.5rem;
            border: 1px solid transparent;
        }
        .qna-badge.answered {
            color: #065f46;
            background: #d1fae5;
            border-color: #6ee7b7;
        }
        .qna-badge.pending {
            color: #9a3412;
            background: #ffedd5;
            border-color: #fdba74;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-900 antialiased selection:bg-indigo-200 selection:text-indigo-900">

    <header class="fixed w-full bg-white/80 backdrop-blur-md z-50 border-b border-slate-200">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between">
            <div class="text-xl font-bold text-indigo-600 tracking-tight">AutoCS<span class="text-slate-900">.ai</span></div>
            <nav class="hidden md:flex space-x-8 text-sm font-medium text-slate-600">
                <a href="#features" class="hover:text-indigo-600 transition">기능 소개</a>
                <a href="#live-demo" class="hover:text-indigo-600 transition">실시간 데모</a>
                <a href="#roi" class="hover:text-indigo-600 transition">도입 효과</a>
                <a href="#pricing" class="hover:text-indigo-600 transition">요금제</a>
            </nav>
            <a href="#cta" class="bg-indigo-600 text-white px-5 py-2 rounded-full text-sm font-semibold hover:bg-indigo-700 transition shadow-sm">무료로 시작하기</a>
        </div>
    </header>

    <section class="pt-32 pb-20 px-4 sm:px-6 lg:px-8 max-w-6xl mx-auto text-center">
        <div class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-indigo-50 text-indigo-600 text-sm font-medium mb-6">
            <span class="flex h-2 w-2 rounded-full bg-indigo-600"></span>
            잠들지 않는 우리 스토어 전담 CS 매니저
        </div>
        <h1 class="text-4xl md:text-6xl font-extrabold tracking-tight mb-6 leading-tight">
            반복되는 단순 문의는 <br>
            <span class="text-transparent bg-clip-text bg-gradient-to-r from-indigo-600 to-violet-500">똑똑한 AI에게 맡기세요</span>
        </h1>
        <p class="text-lg md:text-xl text-slate-600 mb-10 max-w-2xl mx-auto leading-relaxed">
            대표님은 제품 기획과 매출 성장에만 집중하세요. CS 처리 시간을 90% 단축하고 새벽 시간대 답변으로 구매 전환율을 극대화합니다.
        </p>
        <div class="flex flex-col sm:flex-row justify-center gap-4">
            <a href="#cta" class="bg-indigo-600 text-white px-8 py-4 rounded-full text-lg font-bold hover:bg-indigo-700 transition shadow-lg hover:shadow-xl transform hover:-translate-y-0.5">14일 무료 체험 시작하기</a>
            <a href="#live-demo" class="bg-white text-slate-700 border border-slate-200 px-8 py-4 rounded-full text-lg font-bold hover:bg-slate-50 transition shadow-sm flex items-center justify-center gap-2">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd" fill-rule="evenodd"></path></svg>
                실시간 데모 체험
            </a>
        </div>
    </section>

    <section class="bg-slate-900 text-white py-20 px-4 sm:px-6 lg:px-8">
        <div class="max-w-6xl mx-auto">
            <div class="text-center mb-16">
                <h2 class="text-3xl md:text-4xl font-bold mb-4">오늘도 '배송 언제 되나요?' 답변 다느라 하루가 다 갔나요?</h2>
                <p class="text-slate-400 text-lg">스마트스토어 운영자들의 가장 큰 스트레스, 바로 끝없는 CS입니다.</p>
            </div>
            <div class="grid md:grid-cols-3 gap-8">
                <div class="bg-slate-800 p-8 rounded-2xl border border-slate-700">
                    <div class="w-12 h-12 bg-red-500/10 text-red-400 rounded-xl flex items-center justify-center mb-6 text-2xl">🏃</div>
                    <h3 class="text-xl font-bold mb-3">답변 지연, 고객 이탈</h3>
                    <p class="text-slate-400 leading-relaxed">10분만 답변이 늦어져도 고객은 다른 스토어로 떠납니다. 빠른 응대는 곧 매출입니다.</p>
                </div>
                <div class="bg-slate-800 p-8 rounded-2xl border border-slate-700">
                    <div class="w-12 h-12 bg-orange-500/10 text-orange-400 rounded-xl flex items-center justify-center mb-6 text-2xl">🔄</div>
                    <h3 class="text-xl font-bold mb-3">단순 반복 업무의 늪</h3>
                    <p class="text-slate-400 leading-relaxed">배송, 교환, 환불 등 매일 똑같은 질문에 에너지를 낭비하고 있습니다.</p>
                </div>
                <div class="bg-slate-800 p-8 rounded-2xl border border-slate-700">
                    <div class="w-12 h-12 bg-blue-500/10 text-blue-400 rounded-xl flex items-center justify-center mb-6 text-2xl">📱</div>
                    <h3 class="text-xl font-bold mb-3">퇴근 없는 삶</h3>
                    <p class="text-slate-400 leading-relaxed">저녁, 주말, 새벽에 올라오는 문의에 늘 핸드폰을 붙잡고 불안해해야 합니다.</p>
                </div>
            </div>
        </div>
    </section>

    <section id="features" class="py-24 px-4 sm:px-6 lg:px-8 max-w-6xl mx-auto">
        <div class="text-center mb-16">
            <h2 class="text-3xl md:text-4xl font-bold mb-4 text-slate-900">단순 매크로가 아닙니다.<br>내 스토어를 완벽히 이해하는 AI 에이전트입니다.</h2>
        </div>
        <div class="grid md:grid-cols-2 gap-12 items-center">
            <div class="space-y-10">
                <div class="flex gap-4">
                    <div class="flex-shrink-0 w-12 h-12 bg-indigo-100 text-indigo-600 rounded-xl flex items-center justify-center font-bold text-xl">1</div>
                    <div>
                        <h3 class="text-xl font-bold mb-2">24시간 365일, 1초 만에 칼답 ⚡</h3>
                        <p class="text-slate-600">고객이 문의를 남기는 즉시 밤낮을 가리지 않고 정확한 답변을 달아줍니다. 구매 취소를 획기적으로 줄여줍니다.</p>
                    </div>
                </div>
                <div class="flex gap-4">
                    <div class="flex-shrink-0 w-12 h-12 bg-indigo-100 text-indigo-600 rounded-xl flex items-center justify-center font-bold text-xl">2</div>
                    <div>
                        <h3 class="text-xl font-bold mb-2">문맥을 파악하는 스마트 AI 🧠</h3>
                        <p class="text-slate-600">"어제 시켰는데 언제 옴?" 같은 질문도 찰떡같이 이해합니다. 상품 상세페이지와 기존 데이터를 학습해 사람처럼 답변합니다.</p>
                    </div>
                </div>
                <div class="flex gap-4">
                    <div class="flex-shrink-0 w-12 h-12 bg-indigo-100 text-indigo-600 rounded-xl flex items-center justify-center font-bold text-xl">3</div>
                    <div>
                        <h3 class="text-xl font-bold mb-2">클릭 3번으로 끝나는 초간편 연동 🔗</h3>
                        <p class="text-slate-600">복잡한 API 설정이 필요 없습니다. 네이버 로그인 한 번이면 즉시 스토어와 연동되어 AI 매니저가 업무를 시작합니다.</p>
                    </div>
                </div>
            </div>
            <div class="bg-slate-200 rounded-2xl h-96 flex items-center justify-center border border-slate-300 shadow-inner relative overflow-hidden">
                <div class="absolute inset-0 bg-gradient-to-br from-indigo-500/10 to-purple-500/10"></div>
                <div class="bg-white p-6 rounded-xl shadow-lg w-3/4 transform rotate-2 transition hover:rotate-0 duration-300">
                    <div class="flex items-center gap-3 border-b pb-3 mb-3">
                        <div class="w-8 h-8 bg-green-500 rounded-full flex items-center justify-center text-white text-xs">N</div>
                        <div>
                            <div class="text-sm font-bold">고객 문의: 배송 언제 출발하나요?</div>
                            <div class="text-xs text-slate-500">방금 전</div>
                        </div>
                    </div>
                    <div class="bg-indigo-50 p-3 rounded-lg border border-indigo-100">
                        <div class="text-xs font-bold text-indigo-600 mb-1">AI 매니저 답변 완료 ⚡</div>
                        <div class="text-sm text-slate-700">고객님 안녕하세요! 해당 상품은 오늘 오후 2시 이전 주문건으로 금일 한진택배로 출고될 예정입니다. 감사합니다.</div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="live-demo" class="py-24 px-4 sm:px-6 lg:px-8 bg-white border-y border-slate-200">
        <div class="max-w-6xl mx-auto">
            <div class="text-center mb-12">
                <h2 class="text-3xl md:text-4xl font-bold mb-4 text-slate-900">AGENTR 실시간 데모</h2>
                <p class="text-slate-600 max-w-3xl mx-auto">
                    공개 체험 링크:
                    <a class="text-indigo-600 font-semibold underline" href="https://smartstore.naver.com/ssyouth/products/13141901994" target="_blank" rel="noopener noreferrer">
                        ssyouth 상품 문의 페이지
                    </a>
                    에 문의를 남기면, 아래 타임라인에서 AGENTR 자동응답 결과를 실시간으로 확인할 수 있습니다.
                </p>
            </div>

            <div class="grid lg:grid-cols-2 gap-6 mb-6">
                <div class="bg-slate-50 border border-slate-200 rounded-2xl p-6">
                    <h3 class="text-lg font-bold mb-4">기본 설정</h3>
                    <div class="grid sm:grid-cols-2 gap-4">
                        <div>
                            <label class="text-sm text-slate-600" for="tenantId">tenant_id</label>
                            <input id="tenantId" class="mt-1 w-full rounded-xl border border-slate-300 px-3 py-2" value="tenant-demo" />
                        </div>
                        <div>
                            <label class="text-sm text-slate-600" for="sessionId">session_id</label>
                            <input id="sessionId" class="mt-1 w-full rounded-xl border border-slate-300 px-3 py-2" value="homepage-demo-session" />
                        </div>
                        <div class="sm:col-span-2">
                            <label class="text-sm text-slate-600" for="autoToken">x-naver-autoreply-token</label>
                            <input id="autoToken" class="mt-1 w-full rounded-xl border border-slate-300 px-3 py-2" placeholder="자동응답 토큰 입력" />
                        </div>
                    </div>
                    <div class="mt-4 flex flex-wrap gap-2">
                        <button id="btnHealth" class="px-4 py-2 rounded-xl bg-slate-900 text-white text-sm font-semibold">/health</button>
                        <button id="btnReady" class="px-4 py-2 rounded-xl bg-indigo-600 text-white text-sm font-semibold">/ready</button>
                        <a href="/static/mvp_demo.html" class="px-4 py-2 rounded-xl bg-white border border-slate-300 text-slate-700 text-sm font-semibold">고급 디버그 화면</a>
                    </div>
                    <div class="mt-4 text-xs text-slate-500" id="statusMessage">상태 체크 대기 중</div>
                    <pre class="json-panel mt-2" id="statusOut">{}</pre>
                </div>

                <div class="bg-slate-50 border border-slate-200 rounded-2xl p-6">
                    <h3 class="text-lg font-bold mb-4">정책/FAQ 질의 테스트</h3>
                    <label class="text-sm text-slate-600" for="chatQuestion">질문</label>
                    <textarea id="chatQuestion" class="mt-1 w-full rounded-xl border border-slate-300 px-3 py-2 h-28">반품은 수령 후 며칠 이내에 가능한가요?</textarea>
                    <div class="mt-3 flex flex-wrap gap-2">
                        <button id="btnChatAsk" class="px-4 py-2 rounded-xl bg-indigo-600 text-white text-sm font-semibold">답변 생성</button>
                        <button id="btnShippingSample" class="px-4 py-2 rounded-xl bg-white border border-slate-300 text-slate-700 text-sm font-semibold">배송 샘플 질문</button>
                    </div>
                    <pre class="json-panel mt-4" id="chatOut">{}</pre>
                </div>
            </div>

            <div class="grid lg:grid-cols-2 gap-6">
                <div class="bg-slate-50 border border-slate-200 rounded-2xl p-6">
                    <h3 class="text-lg font-bold mb-4">네이버 문의 즉시 처리</h3>
                    <div class="grid sm:grid-cols-2 gap-4">
                        <div>
                            <label class="text-sm text-slate-600" for="questionId">question_id (옵션)</label>
                            <input id="questionId" class="mt-1 w-full rounded-xl border border-slate-300 px-3 py-2" placeholder="비우면 미답변 1건 자동 선택" />
                        </div>
                        <div>
                            <label class="text-sm text-slate-600" for="maxIterations">max_iterations</label>
                            <input id="maxIterations" type="number" min="1" max="100" value="20" class="mt-1 w-full rounded-xl border border-slate-300 px-3 py-2" />
                        </div>
                    </div>
                    <div class="mt-3 flex flex-wrap gap-2">
                        <button id="btnListQna" class="px-4 py-2 rounded-xl bg-slate-900 text-white text-sm font-semibold">문의 목록 조회</button>
                        <button id="btnAutoOnce" class="px-4 py-2 rounded-xl bg-indigo-600 text-white text-sm font-semibold">1건 자동응답</button>
                        <button id="btnDrain" class="px-4 py-2 rounded-xl bg-white border border-slate-300 text-slate-700 text-sm font-semibold">일괄 자동응답</button>
                    </div>
                    <pre class="json-panel mt-4" id="qnaOut">{}</pre>
                </div>

                <div class="bg-indigo-50 border border-indigo-100 rounded-2xl p-6">
                    <h3 class="text-lg font-bold mb-4 text-indigo-900">실시간 문의 감지 타임라인</h3>
                    <div class="grid sm:grid-cols-2 gap-4">
                        <div>
                            <label class="text-sm text-indigo-700" for="liveIntervalSec">poll 주기(초)</label>
                            <input id="liveIntervalSec" type="number" min="3" max="60" value="5" class="mt-1 w-full rounded-xl border border-indigo-200 px-3 py-2 bg-white" />
                        </div>
                        <div>
                            <label class="text-sm text-indigo-700" for="liveMaxItems">표시 개수</label>
                            <input id="liveMaxItems" type="number" min="1" max="30" value="10" class="mt-1 w-full rounded-xl border border-indigo-200 px-3 py-2 bg-white" />
                        </div>
                    </div>
                    <div class="mt-3 flex flex-wrap gap-2">
                        <button id="btnLiveStart" class="px-4 py-2 rounded-xl bg-indigo-600 text-white text-sm font-semibold">실시간 모니터 시작</button>
                        <button id="btnLiveStop" class="px-4 py-2 rounded-xl bg-slate-900 text-white text-sm font-semibold">중지</button>
                        <button id="btnLivePollNow" class="px-4 py-2 rounded-xl bg-white border border-indigo-200 text-indigo-900 text-sm font-semibold">지금 1회 실행</button>
                    </div>
                    <div id="liveStatus" class="mt-4 text-sm text-indigo-900 font-medium">대기 중</div>
                    <p class="mt-2 text-xs text-indigo-700">이 영역은 공개 데모 피드(`/v1/tools/naver/public-demo-feed`)를 통해 자동 업데이트됩니다.</p>
                    <div id="liveTimeline" class="mt-3 grid gap-2"></div>
                    <h4 class="mt-4 text-sm font-bold text-indigo-900">스마트스토어 QnA 실시간 보드</h4>
                    <div id="liveQnaBoard" class="mt-2 grid gap-2"></div>
                    <pre class="json-panel mt-4" id="liveOut">{}</pre>
                </div>
            </div>
        </div>
    </section>

    <section id="roi" class="bg-indigo-600 text-white py-24 px-4 sm:px-6 lg:px-8">
        <div class="max-w-6xl mx-auto">
            <h2 class="text-3xl md:text-4xl font-bold text-center mb-16">도입 한 달 후, 스토어에 찾아오는 놀라운 변화</h2>
            <div class="grid md:grid-cols-3 gap-8 text-center mb-20">
                <div>
                    <div class="text-5xl font-extrabold mb-2">3<span class="text-2xl font-medium">시간</span></div>
                    <div class="text-indigo-200">하루 평균 절약되는 시간</div>
                </div>
                <div>
                    <div class="text-5xl font-extrabold mb-2">25<span class="text-2xl font-medium">%</span></div>
                    <div class="text-indigo-200">주말/새벽 구매 전환율 상승</div>
                </div>
                <div>
                    <div class="text-5xl font-extrabold mb-2">99<span class="text-2xl font-medium">%</span></div>
                    <div class="text-indigo-200">단순 문의 자동 처리율</div>
                </div>
            </div>

            <div class="grid md:grid-cols-2 gap-8">
                <div class="bg-white/10 p-8 rounded-2xl backdrop-blur-sm border border-white/20">
                    <div class="flex text-yellow-400 mb-4">★★★★★</div>
                    <p class="text-lg leading-relaxed mb-6">"이전에는 CS 때문에 스트레스받아서 스토어 접을까 고민도 했어요. 이거 도입하고 나서는 아침에 일어나서 AI가 밤새 달아놓은 답변들 확인만 하면 끝입니다. 진짜 제2의 직원입니다!"</p>
                    <div class="font-bold">- 월 매출 5천만 원 A 의류 스토어 대표님</div>
                </div>
                <div class="bg-white/10 p-8 rounded-2xl backdrop-blur-sm border border-white/20">
                    <div class="flex text-yellow-400 mb-4">★★★★★</div>
                    <p class="text-lg leading-relaxed mb-6">"반신반의하며 썼는데, 제가 직접 쓰는 것보다 AI가 고객 응대를 더 다정하게 잘하네요. 덕분에 친절하다는 리뷰가 눈에 띄게 늘었습니다. 마케팅할 시간이 생겨서 너무 좋아요."</p>
                    <div class="font-bold">- B 건강기능식품 스토어 대표님</div>
                </div>
            </div>
        </div>
    </section>

    <section id="pricing" class="py-24 px-4 sm:px-6 lg:px-8 bg-slate-50 max-w-6xl mx-auto">
        <div class="text-center mb-16">
            <h2 class="text-3xl md:text-4xl font-bold mb-4 text-slate-900">스토어 규모에 맞게 합리적으로 시작하세요</h2>
        </div>
        <div class="grid md:grid-cols-3 gap-8 max-w-5xl mx-auto items-center">
            <div class="bg-white p-8 rounded-3xl border border-slate-200 shadow-sm">
                <h3 class="text-xl font-bold text-slate-900 mb-2">Starter</h3>
                <div class="text-3xl font-extrabold mb-6">무료<span class="text-base font-normal text-slate-500"> / 평생</span></div>
                <ul class="space-y-4 mb-8 text-slate-600">
                    <li class="flex items-center gap-2"><span>✓</span> 월 100건 자동 답변</li>
                    <li class="flex items-center gap-2"><span>✓</span> 기본 상품 정보 학습</li>
                    <li class="flex items-center gap-2"><span>✓</span> 기본 톤앤매너 지원</li>
                </ul>
                <button class="w-full py-3 rounded-xl font-bold border border-slate-300 hover:bg-slate-50 transition">무료로 시작하기</button>
            </div>
            <div class="bg-slate-900 p-8 rounded-3xl border border-slate-800 shadow-xl transform md:-translate-y-4 relative">
                <div class="absolute top-0 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-indigo-500 text-white px-3 py-1 rounded-full text-sm font-bold">가장 많이 선택함</div>
                <h3 class="text-xl font-bold text-white mb-2">Pro</h3>
                <div class="text-3xl font-extrabold text-white mb-6">29,000원<span class="text-base font-normal text-slate-400"> / 월</span></div>
                <ul class="space-y-4 mb-8 text-slate-300">
                    <li class="flex items-center gap-2 text-white font-medium"><span class="text-indigo-400">✓</span> 월 3,000건 자동 답변</li>
                    <li class="flex items-center gap-2"><span class="text-indigo-400">✓</span> 상품 + 공지사항 완벽 학습</li>
                    <li class="flex items-center gap-2"><span class="text-indigo-400">✓</span> 스토어 맞춤 톤앤매너 커스텀</li>
                    <li class="flex items-center gap-2"><span class="text-indigo-400">✓</span> 우선 지원 CS</li>
                </ul>
                <button class="w-full py-3 rounded-xl font-bold bg-indigo-600 text-white hover:bg-indigo-700 transition">14일 무료 체험하기</button>
            </div>
            <div class="bg-white p-8 rounded-3xl border border-slate-200 shadow-sm">
                <h3 class="text-xl font-bold text-slate-900 mb-2">Enterprise</h3>
                <div class="text-3xl font-extrabold mb-6">별도 문의</div>
                <ul class="space-y-4 mb-8 text-slate-600">
                    <li class="flex items-center gap-2"><span>✓</span> 답변 건수 무제한</li>
                    <li class="flex items-center gap-2"><span>✓</span> 다중 스토어 통합 관리</li>
                    <li class="flex items-center gap-2"><span>✓</span> 맞춤형 데이터 전용 튜닝</li>
                    <li class="flex items-center gap-2"><span>✓</span> 전담 매니저 배정</li>
                </ul>
                <button class="w-full py-3 rounded-xl font-bold border border-slate-300 hover:bg-slate-50 transition">도입 문의하기</button>
            </div>
        </div>
    </section>

    <section id="cta" class="py-20 px-4 text-center border-t border-slate-200 bg-white">
        <h2 class="text-3xl font-bold mb-6 text-slate-900">가장 저렴하고 일 잘하는 직원을 오늘 바로 채용하세요.</h2>
        <p class="text-slate-600 mb-8 max-w-xl mx-auto">가입 후 14일 동안 결제 없이 모든 기능을 마음껏 테스트해 보실 수 있습니다.</p>
        <button class="bg-indigo-600 text-white px-10 py-4 rounded-full text-xl font-bold hover:bg-indigo-700 transition shadow-lg transform hover:-translate-y-0.5">
            지금 바로 스토어에 AI 매니저 출근시키기
        </button>
    </section>

    <footer class="py-8 text-center text-slate-500 text-sm bg-slate-50">
        <p>&copy; 2026 AutoCS.ai All rights reserved.</p>
    </footer>

    <script>
      const baseUrl = window.location.origin;
      const pretty = (v) => JSON.stringify(v, null, 2);
      const byId = (id) => document.getElementById(id);

      async function callJson(path, options = {}) {
        const response = await fetch(baseUrl + path, options);
        const text = await response.text();
        let body = {};
        try {
          body = text ? JSON.parse(text) : {};
        } catch (_err) {
          body = { raw: text };
        }
        return {
          status: response.status,
          headers: Object.fromEntries(response.headers.entries()),
          body,
        };
      }

      function setStatusMessage(text) {
        byId("statusMessage").textContent = text;
      }

      function makeAutoHeaders() {
        const token = byId("autoToken").value.trim();
        const headers = { "content-type": "application/json" };
        if (token) {
          headers["x-naver-autoreply-token"] = token;
        }
        return headers;
      }

      byId("btnHealth").onclick = async () => {
        const out = await callJson("/health");
        byId("statusOut").textContent = pretty(out);
        setStatusMessage(out.status === 200 ? "API 서버 정상" : "API 서버 확인 필요");
      };

      byId("btnReady").onclick = async () => {
        const out = await callJson("/ready");
        byId("statusOut").textContent = pretty(out);
        if (out.status === 200 && out.body && out.body.status === "ok") {
          setStatusMessage("의존성 준비 완료");
        } else {
          setStatusMessage("의존성 체크 실패 또는 지연");
        }
      };

      byId("btnShippingSample").onclick = () => {
        byId("chatQuestion").value = "지금 주문하면 언제 도착하나요?";
      };

      byId("btnChatAsk").onclick = async () => {
        const payload = {
          tenant_id: byId("tenantId").value.trim() || "tenant-demo",
          session_id: byId("sessionId").value.trim() || "homepage-demo-session",
          user_message: byId("chatQuestion").value.trim(),
        };
        const out = await callJson("/v1/chat/query", {
          method: "POST",
          headers: { "content-type": "application/json" },
          body: JSON.stringify(payload),
        });
        byId("chatOut").textContent = pretty(out);
      };

      byId("btnListQna").onclick = async () => {
        const out = await callJson("/v1/tools/naver/qnas?page=1&size=20");
        byId("qnaOut").textContent = pretty(out);
      };

      byId("btnAutoOnce").onclick = async () => {
        const payload = {
          tenant_id: byId("tenantId").value.trim() || "tenant-demo",
          session_id_prefix: "landing-auto-once",
          dry_run: false,
        };
        const questionId = byId("questionId").value.trim();
        if (questionId) {
          payload.question_id = questionId;
        }
        const out = await callJson("/v1/tools/naver/auto-answer-once", {
          method: "POST",
          headers: makeAutoHeaders(),
          body: JSON.stringify(payload),
        });
        byId("qnaOut").textContent = pretty(out);
      };

      byId("btnDrain").onclick = async () => {
        const payload = {
          tenant_id: byId("tenantId").value.trim() || "tenant-demo",
          session_id_prefix: "landing-auto-drain",
          max_iterations: Number(byId("maxIterations").value || 20),
          dry_run: false,
          page: 1,
          size: 50,
        };
        const out = await callJson("/v1/tools/naver/auto-answer-drain", {
          method: "POST",
          headers: makeAutoHeaders(),
          body: JSON.stringify(payload),
        });
        byId("qnaOut").textContent = pretty(out);
      };

      const liveSeenQuestionIds = new Set();
      let liveTimer = null;

      function setLiveStatus(text) {
        byId("liveStatus").textContent = text;
      }

      function clearNode(node) {
        while (node.firstChild) {
          node.removeChild(node.firstChild);
        }
      }

      function formatTimestamp(raw) {
        const text = String(raw || "").trim();
        if (!text) {
          return "시간 정보 없음";
        }
        const parsed = new Date(text);
        if (Number.isNaN(parsed.getTime())) {
          return text;
        }
        return parsed.toLocaleString("ko-KR");
      }

      function renderLiveItem(item) {
        const maxItems = Math.max(1, Number(byId("liveMaxItems").value || 10));
        const node = document.createElement("div");
        node.className = "live-item";

        const meta = document.createElement("div");
        meta.className = "live-item-meta";
        meta.textContent = `${item.time} / question_id=${item.question_id}`;

        const q = document.createElement("div");
        q.className = "live-item-q";
        q.textContent = `Q. ${item.question}`;

        const a = document.createElement("div");
        a.className = "live-item-a";
        a.textContent = `A. ${item.answer}`;

        node.append(meta, q, a);
        byId("liveTimeline").prepend(node);
        while (byId("liveTimeline").children.length > maxItems) {
          byId("liveTimeline").removeChild(byId("liveTimeline").lastChild);
        }
      }

      function renderLatestQnaBoard(latestQnas) {
        const container = byId("liveQnaBoard");
        clearNode(container);

        const allItems = Array.isArray(latestQnas) ? latestQnas : [];
        const maxItems = Math.max(1, Number(byId("liveMaxItems").value || 10));
        const items = allItems.slice(0, maxItems);

        if (!items.length) {
          const empty = document.createElement("div");
          empty.className = "qna-board-item";
          const text = document.createElement("div");
          text.className = "live-item-a";
          text.textContent = "표시할 문의가 없습니다. 스마트스토어에서 문의를 등록해 보세요.";
          empty.appendChild(text);
          container.appendChild(empty);
          return;
        }

        for (const item of items) {
          const card = document.createElement("div");
          card.className = "qna-board-item";

          const head = document.createElement("div");
          head.className = "qna-board-head";

          const meta = document.createElement("div");
          meta.className = "live-item-meta";
          meta.textContent = `${formatTimestamp(item.created_at)} / question_id=${String(item.question_id || "").trim()}`;

          const badge = document.createElement("span");
          const answered = Boolean(item.answered);
          badge.className = `qna-badge ${answered ? "answered" : "pending"}`;
          badge.textContent = answered ? "답변완료" : "답변대기";

          head.append(meta, badge);

          const q = document.createElement("div");
          q.className = "live-item-q";
          q.textContent = `Q. ${String(item.question || "").trim()}`;

          const answerText = String(item.answer || "").trim();
          const a = document.createElement("div");
          a.className = "live-item-a";
          if (answerText) {
            a.textContent = `A. ${answerText}`;
          } else if (answered) {
            a.textContent = "A. 답변 반영 중입니다. 잠시 후 최신 답변이 표시됩니다.";
          } else {
            a.textContent = "A. 아직 답변 대기 중입니다.";
          }

          card.append(head, q, a);
          container.appendChild(card);
        }
      }

      async function runLivePollOnce() {
        const tenantId = byId("tenantId").value.trim() || "tenant-demo";
        const out = await callJson(`/v1/tools/naver/public-demo-feed?tenant_id=${encodeURIComponent(tenantId)}&page=1&size=20`);

        byId("liveOut").textContent = pretty(out);

        if (out.status !== 200) {
          setLiveStatus(`오류: 공개 데모 피드 호출 실패 (${out.status})`);
          return;
        }

        const body = out.body || {};
        const latestQnas = Array.isArray(body.latest_qnas) ? body.latest_qnas : [];
        renderLatestQnaBoard(latestQnas);
        const autoResult = body.auto_result || {};
        const questionId = String(autoResult.question_id || "").trim();

        if (autoResult.status === "ok" && autoResult.posted === true && questionId && !liveSeenQuestionIds.has(questionId)) {
          liveSeenQuestionIds.add(questionId);
          renderLiveItem({
            time: new Date().toLocaleString("ko-KR"),
            question_id: questionId,
            question: String(autoResult.question || ""),
            answer: String(autoResult.answer || ""),
          });
          setLiveStatus(`답변 등록 완료: question_id=${questionId}`);
          return;
        }

        if (autoResult.reason === "no_unanswered_qna") {
          setLiveStatus("미답변 문의 대기 중...");
        } else if (autoResult.reason) {
          setLiveStatus(`실행 결과: ${autoResult.reason}`);
        } else {
          const qnaCount = latestQnas.length;
          setLiveStatus(`실행 완료 (최신 문의 ${qnaCount}건 반영)`);
        }
      }

      byId("btnLivePollNow").onclick = async () => {
        await runLivePollOnce();
      };

      byId("btnLiveStart").onclick = async () => {
        if (liveTimer) {
          clearInterval(liveTimer);
        }
        const intervalSec = Math.max(3, Number(byId("liveIntervalSec").value || 5));
        setLiveStatus(`실시간 모니터 실행 중 (${intervalSec}초 주기)`);
        await runLivePollOnce();
        liveTimer = setInterval(runLivePollOnce, intervalSec * 1000);
      };

      byId("btnLiveStop").onclick = () => {
        if (liveTimer) {
          clearInterval(liveTimer);
          liveTimer = null;
        }
        setLiveStatus("중지됨");
      };
    </script>
</body>
</html>
